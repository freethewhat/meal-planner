import{u as q,s as E,e as O,f as M}from"./meals-Dz4YbWgh.js";import{s as z,d as S,e as G,o as H,c as u,f as n,g as p,w as e,h as r,u as c,b as a,a as o,i as f,F as x,r as w,t as l,j as J}from"./index-yy6CErDl.js";import{e as Q}from"./eachDayOfInterval-Bmje5lxQ.js";const X={class:"space-y-6"},Y={class:"d-flex align-center justify-space-between"},ee={class:"d-flex gap-4"},te={key:0,class:"d-flex justify-center"},se={class:"d-flex justify-space-between align-start"},ne={class:"text-h6"},oe={class:"text-caption"},ae={class:"text-caption mt-2"},le={class:"mt-2"},re={class:"d-flex justify-space-between mt-4"},ce={class:"text-caption"},ie={class:"text-caption"},_e={class:"pl-4"},ue={class:"text-caption"},de={class:"text-h6"},ke={__name:"WeeklyView",setup(ve){const y=q(),{weeklyMeals:V,loading:W,error:b,currentWeekStart:D}=z(y),h=S(!1),d=S(null),N=G(()=>{const i=E(D.value,{weekStartsOn:1}),s=O(D.value,{weekStartsOn:1});return Q({start:i,end:s}).map(_=>M(_,"yyyy-MM-dd"))}),j=i=>{const s=new Date,_=E(s,{weekStartsOn:1}),m=O(s,{weekStartsOn:1}),v=new Date(i);return v>=_&&v<=m},B=i=>{d.value=i,h.value=!0},I=()=>{h.value=!1,d.value=null},$=i=>i.replace(/_/g," ").replace(/([A-Z])/g," $1").replace(/^./,s=>s.toUpperCase());return H(()=>{y.fetchMeals()}),(i,s)=>{const _=r("v-btn"),m=r("v-card-text"),v=r("v-card"),F=r("v-progress-circular"),T=r("v-alert"),g=r("v-col"),C=r("v-row"),U=r("v-card-title"),A=r("v-list-item"),K=r("v-list"),L=r("v-divider"),P=r("v-spacer"),R=r("v-card-actions"),Z=r("v-dialog");return a(),u("div",X,[n(v,null,{default:e(()=>[n(m,null,{default:e(()=>[o("div",Y,[n(_,{onClick:c(y).previousWeek,variant:"outlined"},{default:e(()=>s[1]||(s[1]=[f(" Previous ")])),_:1,__:[1]},8,["onClick"]),o("div",ee,[(a(!0),u(x,null,w(N.value,t=>(a(),p(_,{key:t,onClick:k=>c(y).setCurrentWeek(t),color:j(t)?"primary":void 0,variant:"text"},{default:e(()=>[f(l(c(M)(new Date(t),"EEE")),1)]),_:2},1032,["onClick","color"]))),128))]),n(_,{onClick:c(y).nextWeek,variant:"outlined"},{default:e(()=>s[2]||(s[2]=[f(" Next ")])),_:1,__:[2]},8,["onClick"])])]),_:1})]),_:1}),c(W)?(a(),u("div",te,[n(F,{indeterminate:"",color:"primary"})])):c(b)?(a(),p(T,{key:1,type:"error"},{default:e(()=>[f(l(c(b)),1)]),_:1})):(a(),p(C,{key:2},{default:e(()=>[(a(!0),u(x,null,w(c(V),t=>(a(),p(g,{key:t.id,cols:"12",md:"6",lg:"4"},{default:e(()=>[n(v,{class:"h-100",onClick:k=>B(t),hover:""},{default:e(()=>[n(m,null,{default:e(()=>[o("div",se,[o("h3",ne,l(t.name),1),o("span",oe,l(c(M)(new Date(t.date),"EEE, MMM d")),1)]),o("p",ae,l(t.time),1),o("p",le,l(t.description),1),o("div",re,[o("div",ce,l(t.servings)+" servings ",1),o("div",ie,l(t.nutrition.per_serving.calories)+" cal/serving ",1)])]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})),n(Z,{modelValue:h.value,"onUpdate:modelValue":s[0]||(s[0]=t=>h.value=t),"max-width":"800"},{default:e(()=>[d.value?(a(),p(v,{key:0},{default:e(()=>[n(U,{class:"text-h4"},{default:e(()=>[f(l(d.value.name),1)]),_:1}),n(m,null,{default:e(()=>[n(C,null,{default:e(()=>[n(g,{cols:"12",md:"6"},{default:e(()=>[s[3]||(s[3]=o("h4",{class:"text-h6 mb-4"},"Ingredients",-1)),n(K,null,{default:e(()=>[(a(!0),u(x,null,w(d.value.ingredients,t=>(a(),p(A,{key:t.name},{default:e(()=>[f(l(t.amount)+" "+l(t.unit)+" "+l(t.name),1)]),_:2},1024))),128))]),_:1})]),_:1,__:[3]}),n(g,{cols:"12",md:"6"},{default:e(()=>[s[4]||(s[4]=o("h4",{class:"text-h6 mb-4"},"Instructions",-1)),o("ol",_e,[(a(!0),u(x,null,w(d.value.instructions.split(`
`),(t,k)=>(a(),u("li",{key:k,class:"mb-2"},l(t),1))),128))])]),_:1,__:[4]})]),_:1}),n(L,{class:"my-4"}),s[5]||(s[5]=o("h4",{class:"text-h6 mb-4"},"Nutrition Information",-1)),n(C,null,{default:e(()=>[(a(!0),u(x,null,w(d.value.nutrition.per_serving,(t,k)=>(a(),p(g,{key:k,cols:"6",md:"3"},{default:e(()=>[n(v,{variant:"outlined"},{default:e(()=>[n(m,null,{default:e(()=>[o("div",ue,l($(k)),1),o("div",de,l(t),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1,__:[5]}),n(R,null,{default:e(()=>[n(P),n(_,{color:"primary",onClick:I},{default:e(()=>s[6]||(s[6]=[f(" Close ")])),_:1,__:[6]})]),_:1})]),_:1})):J("",!0)]),_:1},8,["modelValue"])])}}};export{ke as default};
