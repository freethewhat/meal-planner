import{u as N,s as h,e as k,f as y}from"./meals-DY4XG922.js";import{s as V,d as w,e as j,o as I,c as a,a as t,f as u,u as o,F as g,r as v,n as B,t as n,w as m,b as r,g as $,h as z}from"./index-DZOtdpZX.js";import{e as F}from"./eachDayOfInterval-BaU4N5W-.js";import{S as G,Y as T,h as b,G as Y,V as A}from"./transition-DWeuEKyY.js";const K={class:"space-y-6"},L={class:"bg-white shadow rounded-lg p-4"},P={class:"flex items-center justify-between"},R={class:"flex items-center space-x-4"},U=["onClick"],Z={key:0,class:"flex justify-center"},q={key:1,class:"text-red-500"},H={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},J=["onClick"],Q={class:"p-6"},X={class:"flex justify-between items-start"},ee={class:"text-lg font-medium text-gray-900"},te={class:"text-sm text-gray-500"},se={class:"mt-2 text-sm text-gray-500"},oe={class:"mt-2 text-gray-600"},ae={class:"mt-4 flex items-center justify-between"},ne={class:"text-sm text-gray-500"},re={class:"text-sm text-gray-500"},ie={class:"fixed inset-0 overflow-y-auto"},le={class:"flex min-h-full items-center justify-center p-4 text-center"},de={key:0,class:"space-y-6"},ce={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ue={class:"space-y-2"},me={class:"list-decimal list-inside space-y-2"},ge={class:"border-t border-gray-200 pt-6"},ve={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},pe={class:"text-sm text-gray-500"},ye={class:"mt-1 text-lg font-semibold text-gray-900"},we={__name:"WeeklyView",setup(fe){const d=N(),{weeklyMeals:M,loading:C,error:f,currentWeekStart:x}=V(d),p=w(!1),c=w(null),S=j(()=>{const i=h(x.value,{weekStartsOn:1}),s=k(x.value,{weekStartsOn:1});return F({start:i,end:s}).map(e=>y(e,"yyyy-MM-dd"))}),W=i=>{const s=new Date,e=h(s,{weekStartsOn:1}),l=k(s,{weekStartsOn:1}),_=new Date(i);return _>=e&&_<=l},D=i=>{c.value=i,p.value=!0},E=()=>{p.value=!1,c.value=null},O=i=>i.replace(/_/g," ").replace(/([A-Z])/g," $1").replace(/^./,s=>s.toUpperCase());return I(()=>{d.fetchMeals()}),(i,s)=>(r(),a("div",K,[t("div",L,[t("div",P,[t("button",{onClick:s[0]||(s[0]=(...e)=>o(d).previousWeek&&o(d).previousWeek(...e)),class:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"}," Previous "),t("div",R,[(r(!0),a(g,null,v(S.value,e=>(r(),a("button",{key:e,onClick:l=>o(d).setCurrentWeek(e),class:B([W(e)?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50","px-3 py-2 rounded-md text-sm font-medium"])},n(o(y)(new Date(e),"EEE")),11,U))),128))]),t("button",{onClick:s[1]||(s[1]=(...e)=>o(d).nextWeek&&o(d).nextWeek(...e)),class:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"}," Next ")])]),o(C)?(r(),a("div",Z,s[2]||(s[2]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500"},null,-1)]))):o(f)?(r(),a("div",q,n(o(f)),1)):(r(),a("div",H,[(r(!0),a(g,null,v(o(M),e=>(r(),a("div",{key:e.id,class:"bg-white shadow rounded-lg overflow-hidden cursor-pointer hover:shadow-lg transition-shadow duration-200",onClick:l=>D(e)},[t("div",Q,[t("div",X,[t("h3",ee,n(e.name),1),t("span",te,n(o(y)(new Date(e.date),"EEE, MMM d")),1)]),t("p",se,n(e.time),1),t("p",oe,n(e.description),1),t("div",ae,[t("div",ne,n(e.servings)+" servings ",1),t("div",re,n(e.nutrition.per_serving.calories)+" cal/serving ",1)])])],8,J))),128))])),u(o(G),{appear:"",show:p.value,as:"template"},{default:m(()=>[u(o(T),{as:"div",onClose:E,class:"relative z-10"},{default:m(()=>[u(o(b),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:m(()=>s[3]||(s[3]=[t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)])),_:1,__:[3]}),t("div",ie,[t("div",le,[u(o(b),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:m(()=>[u(o(Y),{class:"w-full max-w-3xl transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all"},{default:m(()=>[c.value?(r(),a("div",de,[u(o(A),{as:"h3",class:"text-2xl font-bold text-gray-900"},{default:m(()=>[z(n(c.value.name),1)]),_:1}),t("div",ce,[t("div",null,[s[4]||(s[4]=t("h4",{class:"text-lg font-medium text-gray-900 mb-4"},"Ingredients",-1)),t("ul",ue,[(r(!0),a(g,null,v(c.value.ingredients,e=>(r(),a("li",{key:e.name,class:"text-gray-600"},n(e.amount)+" "+n(e.unit)+" "+n(e.name),1))),128))])]),t("div",null,[s[5]||(s[5]=t("h4",{class:"text-lg font-medium text-gray-900 mb-4"},"Instructions",-1)),t("ol",me,[(r(!0),a(g,null,v(c.value.instructions.split(`
`),(e,l)=>(r(),a("li",{key:l,class:"text-gray-600"},n(e),1))),128))])])]),t("div",ge,[s[6]||(s[6]=t("h4",{class:"text-lg font-medium text-gray-900 mb-4"},"Nutrition Information",-1)),t("div",ve,[(r(!0),a(g,null,v(c.value.nutrition.per_serving,(e,l)=>(r(),a("div",{key:l,class:"bg-gray-50 p-3 rounded"},[t("div",pe,n(O(l)),1),t("div",ye,n(e),1)]))),128))])])])):$("",!0)]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])]))}};export{we as default};
