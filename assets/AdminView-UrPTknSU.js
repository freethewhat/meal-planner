import{s as I,d as v,o as D,c,a as e,f as a,i as n,v as d,F as y,r as w,t as h,u as i,w as u,b as g,h as J}from"./index-BJHTKJvF.js";import{u as O,f as R}from"./meals-Cyz_ObTQ.js";import{S as j,Y as A,h as k,G as E,V as T}from"./transition-Bd7wE0cN.js";const B={class:"space-y-6"},$={class:"bg-white shadow rounded-lg p-6"},F={class:"space-y-4"},G={class:"bg-white shadow rounded-lg overflow-hidden"},Y={class:"divide-y divide-gray-200"},z={class:"flex items-center justify-between"},L={class:"text-lg font-medium text-gray-900"},P={class:"mt-1 text-sm text-gray-500"},q={class:"flex space-x-3"},H=["onClick"],K=["onClick"],Q={class:"fixed inset-0 overflow-y-auto"},W={class:"flex min-h-full items-center justify-center p-4 text-center"},X={class:"mt-4 space-y-4"},Z=["onUpdate:modelValue"],ee=["onUpdate:modelValue"],te=["onUpdate:modelValue"],oe=["onClick"],ae={__name:"AdminView",setup(se){const m=O(),{meals:M,loading:le,error:ne}=I(m),p=v(""),b=v(!1),s=v(null),V=async()=>{try{const l=JSON.parse(p.value);await m.addMeal(l),p.value=""}catch(l){console.error("Error importing recipe:",l)}},_=l=>{s.value=JSON.parse(JSON.stringify(l)),b.value=!0},x=()=>{b.value=!1,s.value=null},C=async()=>{s.value&&(await m.updateMeal(s.value.id,s.value),x())},U=async l=>{confirm("Are you sure you want to delete this meal?")&&await m.deleteMeal(l)},S=()=>{s.value.ingredients||(s.value.ingredients=[]),s.value.ingredients.push({name:"",amount:"",unit:""})},N=l=>{s.value.ingredients.splice(l,1)};return D(()=>{m.fetchMeals()}),(l,t)=>(g(),c("div",B,[e("div",$,[t[8]||(t[8]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Import Recipe",-1)),e("div",F,[e("div",null,[t[7]||(t[7]=e("label",{for:"recipe-json",class:"block text-sm font-medium text-gray-700"},"Recipe JSON",-1)),n(e("textarea",{id:"recipe-json","onUpdate:modelValue":t[0]||(t[0]=o=>p.value=o),rows:"10",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",placeholder:"Paste recipe JSON here..."},null,512),[[d,p.value]])]),e("button",{onClick:V,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700"}," Import Recipe ")])]),e("div",G,[t[9]||(t[9]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h2",{class:"text-lg font-medium text-gray-900"},"Manage Meals")],-1)),e("div",Y,[(g(!0),c(y,null,w(i(M),o=>(g(),c("div",{key:o.id,class:"px-6 py-4"},[e("div",z,[e("div",null,[e("h3",L,h(o.name),1),e("p",P,h(i(R)(new Date(o.date),"MMMM d, yyyy")),1)]),e("div",q,[e("button",{onClick:f=>_(o),class:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"}," Edit ",8,H),e("button",{onClick:f=>U(o.id),class:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700"}," Delete ",8,K)])])]))),128))])]),a(i(j),{appear:"",show:b.value,as:"template"},{default:u(()=>[a(i(A),{as:"div",onClose:x,class:"relative z-10"},{default:u(()=>[a(i(k),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:u(()=>t[10]||(t[10]=[e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)])),_:1,__:[10]}),e("div",Q,[e("div",W,[a(i(k),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:u(()=>[a(i(E),{class:"w-full max-w-3xl transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all"},{default:u(()=>[a(i(T),{as:"h3",class:"text-lg font-medium leading-6 text-gray-900"},{default:u(()=>t[11]||(t[11]=[J(" Edit Meal ")])),_:1,__:[11]}),e("div",X,[e("div",null,[t[12]||(t[12]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Name",-1)),n(e("input",{type:"text",id:"name","onUpdate:modelValue":t[1]||(t[1]=o=>s.value.name=o),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[d,s.value.name]])]),e("div",null,[t[13]||(t[13]=e("label",{for:"date",class:"block text-sm font-medium text-gray-700"},"Date",-1)),n(e("input",{type:"date",id:"date","onUpdate:modelValue":t[2]||(t[2]=o=>s.value.date=o),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[d,s.value.date]])]),e("div",null,[t[14]||(t[14]=e("label",{for:"time",class:"block text-sm font-medium text-gray-700"},"Time",-1)),n(e("input",{type:"text",id:"time","onUpdate:modelValue":t[3]||(t[3]=o=>s.value.time=o),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[d,s.value.time]])]),e("div",null,[t[15]||(t[15]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),n(e("textarea",{id:"description","onUpdate:modelValue":t[4]||(t[4]=o=>s.value.description=o),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[d,s.value.description]])]),e("div",null,[t[16]||(t[16]=e("label",{for:"servings",class:"block text-sm font-medium text-gray-700"},"Servings",-1)),n(e("input",{type:"number",id:"servings","onUpdate:modelValue":t[5]||(t[5]=o=>s.value.servings=o),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[d,s.value.servings,void 0,{number:!0}]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700"},"Ingredients",-1)),(g(!0),c(y,null,w(s.value.ingredients,(o,f)=>(g(),c("div",{key:f,class:"mt-2 flex space-x-2"},[n(e("input",{type:"text","onUpdate:modelValue":r=>o.name=r,placeholder:"Name",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,8,Z),[[d,o.name]]),n(e("input",{type:"text","onUpdate:modelValue":r=>o.amount=r,placeholder:"Amount",class:"block w-24 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,8,ee),[[d,o.amount]]),n(e("input",{type:"text","onUpdate:modelValue":r=>o.unit=r,placeholder:"Unit",class:"block w-24 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,8,te),[[d,o.unit]]),e("button",{onClick:r=>N(f),class:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700"}," Remove ",8,oe)]))),128)),e("button",{onClick:S,class:"mt-2 inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"}," Add Ingredient ")]),e("div",null,[t[18]||(t[18]=e("label",{for:"instructions",class:"block text-sm font-medium text-gray-700"},"Instructions",-1)),n(e("textarea",{id:"instructions","onUpdate:modelValue":t[6]||(t[6]=o=>s.value.instructions=o),rows:"5",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[d,s.value.instructions]])])]),e("div",{class:"mt-6 flex justify-end space-x-3"},[e("button",{onClick:x,class:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"}," Cancel "),e("button",{onClick:C,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700"}," Save Changes ")])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])]))}};export{ae as default};
